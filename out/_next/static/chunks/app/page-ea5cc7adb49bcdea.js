(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1451:(e,t,s)=>{Promise.resolve().then(s.bind(s,3792))},3792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(5155),a=s(2115),i=s(6766);function r(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)([]),[c,n]=(0,a.useState)(0),[o,u]=(0,a.useState)("start"),[d,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)(0),[x,p]=(0,a.useState)(0),[g,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{v(!("maxTouchPoints"in navigator&&navigator.maxTouchPoints>0))},[]),(0,a.useEffect)(()=>{"cards"===o&&0===e.length&&(b(!0),(async()=>{let e=new Set,s=async t=>{let s=0;for(;s<3;)try{let l=await fetch("https://cataas.com/cat?json=true&type=small"),a=await l.json(),i=a.url.startsWith("http")?a.url:"https://cataas.com".concat(a.url.startsWith("/")?"":"/").concat(a.url);if(!e.has(i))return e.add(i),{id:t,url:i,tags:a.tags||[]};s++}catch(e){console.error("Error fetching cat:",e),s++}return console.warn("Could not fetch unique cat image after ".concat(3," attempts for id ").concat(t)),{id:t,url:"https://cataas.com/cat/cute?type=small",tags:["cute"]}},l=Array.from({length:10},(e,t)=>s(t));t((await Promise.all(l)).filter(e=>null!==e)),b(!1)})())},[o]),(0,a.useEffect)(()=>{j&&w&&!g&&(N(!1),k(!1))},[j,w,g]);let S=()=>{m(!1);let t=document.getElementById("cat-card-".concat(c));if(!t)return;let l=x-f;if(Math.abs(l)>100)t.style.transition="transform 0.3s ease, opacity 0.3s ease",t.style.opacity="0",l>0?(t.style.transform="translateX(100%) rotate(10deg)",r([...s,e[c]])):t.style.transform="translateX(-100%) rotate(-10deg)",setTimeout(()=>{var s,l;n(t=>{let s=t+1;return s>=e.length?(u("summary"),t):s}),null==(s=t.querySelector(".like-stamp"))||s.classList.remove("stamp-visible"),null==(l=t.querySelector(".dislike-stamp"))||l.classList.remove("stamp-visible"),t.style.transition="transform 1000ms ease, opacity 1000ms ease",t.style.transform="",t.style.opacity="1",h(0),p(0)},300);else{var a,i;t.style.transition="transform 0.3s ease",t.style.transform="",null==(a=t.querySelector(".like-stamp"))||a.classList.remove("stamp-visible"),null==(i=t.querySelector(".dislike-stamp"))||i.classList.remove("stamp-visible"),setTimeout(()=>{t.style.transition="",h(0),p(0)},300)}};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 w-full max-w-md mx-auto p-4",children:["start"===o&&(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Paws & Preferences"}),(0,l.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"Swipe right to like a kitty, left to dislike!"}),(0,l.jsx)("button",{onClick:()=>{u("cards"),y&&(N(!0),k(!1),setTimeout(()=>{k(!0)},1e3))},className:"bg-blue-500 text-white px-6 py-3 rounded-lg text-lg font-semibold hover:bg-blue-600",children:"Start Swiping"})]}),"cards"===o&&(0,l.jsxs)("div",{className:"relative h-[500px] w-full",children:[y&&j&&(0,l.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex z-50 animate-in fade-in-0 zoom-in-95 duration-300 animate-out fade-out-0 zoom-out-95 duration-300",children:[(0,l.jsx)("div",{className:"w-1/2 h-full rounded-l-lg bg-blue-100 bg-opacity-20 shadow-md flex items-center justify-center text-center",children:(0,l.jsx)("p",{className:"text-blue-700 font-sans font-semibold text-lg",children:"Double-Click to Dislike"})}),(0,l.jsx)("div",{className:"w-1/2 h-full rounded-r-lg bg-red-100 bg-opacity-20 shadow-md flex items-center justify-center text-center",children:(0,l.jsx)("p",{className:"text-red-700 font-sans font-semibold text-lg",children:"Double-Click to Like"})})]}),g?(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("p",{className:"text-lg text-gray-600",children:"Loading cats..."})}):e[c]?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{id:"cat-card-".concat(c),className:"absolute w-full h-full bg-white rounded-lg shadow-lg overflow-hidden",onTouchStart:e=>{m(!0),h(e.touches[0].clientX)},onTouchMove:e=>{if(!d)return;let t=e.touches[0].clientX;p(t);let s=t-f,l=document.getElementById("cat-card-".concat(c));if(l){l.style.transform="translateX(".concat(s,"px) rotate(").concat(s/20,"deg)");let e=l.querySelector(".like-stamp"),t=l.querySelector(".dislike-stamp");s>50?(null==e||e.classList.add("stamp-visible"),null==t||t.classList.remove("stamp-visible")):s<-50?(null==t||t.classList.add("stamp-visible"),null==e||e.classList.remove("stamp-visible")):(null==e||e.classList.remove("stamp-visible"),null==t||t.classList.remove("stamp-visible"))}},onTouchEnd:S,onClick:e=>{if(d)return;let t=document.getElementById("cat-card-".concat(c));if(!t)return;let s=t.getBoundingClientRect(),l=e.clientX-s.left;if(l<0||l>s.width)return;let a=s.width/2,i=t.querySelector(".like-stamp"),r=t.querySelector(".dislike-stamp");l>a?(null==i||i.classList.add("stamp-visible"),null==r||r.classList.remove("stamp-visible")):(null==r||r.classList.add("stamp-visible"),null==i||i.classList.remove("stamp-visible")),h(s.left+a),l>a?p(s.left+a+150):p(s.left+a-150),setTimeout(()=>{S()},300)},children:[(0,l.jsx)(i.default,{src:e[c].url,alt:"Cat",fill:!0,className:"object-cover",unoptimized:!0,priority:0===c}),(0,l.jsx)("div",{className:"like-stamp absolute top-5 left-5 text-2xl font-bold text-green-500 border-4 border-green-500 p-2 rotate-[-20deg] opacity-0 transition-opacity duration-200",children:"LIKE"}),(0,l.jsx)("div",{className:"dislike-stamp absolute top-5 right-5 text-2xl font-bold text-red-500 border-4 border-red-500 p-2 rotate-[-20deg] opacity-0 transition-opacity duration-200",children:"DISLIKE"})]})}):(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("p",{className:"text-lg text-gray-600",children:"No cats loaded"})})]}),"summary"===o&&(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your Favorite Kitties!"}),(0,l.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["You liked ",s.length," out of ",e.length," cats!"]}),(0,l.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:(()=>{if(0===s.length)return"You didn't like any cats this time!";let e={};s.forEach(t=>{t.tags.forEach(t=>{e[t]=(e[t]||0)+1})});let t=Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,2).map(e=>{let[t]=e;return t});if(0===t.length)return"You liked some cats, but we couldn't identify specific preferences.";let l=1===t.length?t[0]:"".concat(t[0]," and ").concat(t[1]);return"You prefer ".concat(l," cats!")})()}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-4 w-full",children:s.map(e=>(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(i.default,{src:e.url,alt:"Liked Cat",width:150,height:100,className:"w-full h-32 object-cover rounded-lg",unoptimized:!0}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.tags.join(", ")})]},e.id))}),(0,l.jsx)("button",{onClick:()=>{t([]),r([]),n(0),u("start")},className:"bg-blue-500 text-white px-6 py-3 rounded-lg text-lg font-semibold hover:bg-blue-600 mt-6",children:"Try Again"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[766,441,684,358],()=>t(1451)),_N_E=e.O()}]);